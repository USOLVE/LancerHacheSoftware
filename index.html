<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="description" content="Application de scoring pour le lancer de hache">
    <title>Lancer de Hache - Scoring</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/icons/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- √âcran d'accueil -->
    <div id="screen-home" class="screen active">
        <div class="home-container">
            <div class="logo">
                <div class="logo-icon">ü™ì</div>
                <h1>LANCER DE HACHE</h1>
                <p class="subtitle">Syst√®me de Scoring</p>
            </div>
            <div class="home-buttons">
                <button id="btn-new-game" class="btn btn-primary btn-large">
                    Nouvelle Partie
                </button>
                <button id="btn-resume-game" class="btn btn-secondary btn-large" style="display: none;">
                    Reprendre la Partie
                </button>
                <button id="btn-leaderboard" class="btn btn-secondary">
                    Classement
                </button>
                <button id="btn-settings" class="btn btn-secondary">
                    Param√®tres
                </button>
            </div>
        </div>
    </div>

    <!-- √âcran de configuration de partie -->
    <div id="screen-setup" class="screen">
        <div class="setup-container">
            <h2>Configuration de la Partie</h2>

            <div class="setup-section">
                <label>Mode de Jeu</label>
                <div class="game-modes">
                    <button class="mode-btn selected" data-mode="classic">
                        <span class="mode-icon">ü™ì</span>
                        <span class="mode-name">Classique</span>
                        <span class="mode-desc">5 s√©ries de 3 lancers</span>
                    </button>
                    <button class="mode-btn" data-mode="luckyLuke">
                        <span class="mode-icon">ü§†</span>
                        <span class="mode-name">Lucky Luke</span>
                        <span class="mode-desc">√âlimine le joueur pr√©c√©dent</span>
                    </button>
                    <button class="mode-btn" data-mode="race">
                        <span class="mode-icon">üèÉ</span>
                        <span class="mode-name">Race</span>
                        <span class="mode-desc">Premier √† 25 points</span>
                    </button>
                    <button class="mode-btn" data-mode="suiteOr">
                        <span class="mode-icon">ü•á</span>
                        <span class="mode-name">Suite d'Or</span>
                        <span class="mode-desc">S√©quence 1-2-3-4-6-4-3-2-1</span>
                    </button>
                    <button class="mode-btn" data-mode="mode007">
                        <span class="mode-icon">üî´</span>
                        <span class="mode-name">007</span>
                        <span class="mode-desc">5 bullseyes pour gagner</span>
                    </button>
                    <button class="mode-btn" data-mode="killer">
                        <span class="mode-icon">üíÄ</span>
                        <span class="mode-name">Killer</span>
                        <span class="mode-desc">Exactement 20 points</span>
                    </button>
                    <button class="mode-btn" data-mode="morpion">
                        <span class="mode-icon">‚≠ï</span>
                        <span class="mode-name">Morpion</span>
                        <span class="mode-desc">Alignez 3 symboles</span>
                    </button>
                    <button class="mode-btn" data-mode="darts301">
                        <span class="mode-icon">üéØ</span>
                        <span class="mode-name">301</span>
                        <span class="mode-desc">Fl√©chettes - Atteindre 0</span>
                    </button>
                    <button class="mode-btn" data-mode="customTarget">
                        <span class="mode-icon">üì±</span>
                        <span class="mode-name">Ta Cible</span>
                        <span class="mode-desc">Upload ta photo</span>
                    </button>
                </div>
            </div>

            <div class="setup-section">
                <label>Nombre de Joueurs: <span id="player-count-display">1</span></label>
                <input type="range" id="player-count" min="1" max="12" value="1" class="slider">
            </div>

            <div class="setup-section" id="team-mode-section" style="display: none;">
                <label>
                    <input type="checkbox" id="team-mode-toggle">
                    Mode √âquipes (2 √©quipes)
                </label>
            </div>

            <div class="setup-section">
                <label>Noms des Joueurs</label>
                <div id="player-names-container" class="player-names">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>
            </div>

            <div class="setup-buttons">
                <button id="btn-back-home" class="btn btn-secondary">Retour</button>
                <button id="btn-start-game" class="btn btn-primary">Commencer</button>
            </div>
        </div>
    </div>

    <!-- √âcran de jeu principal -->
    <div id="screen-game" class="screen">
        <div class="game-container">
            <!-- En-t√™te du jeu -->
            <div class="game-header">
                <div class="current-player">
                    <span class="player-label">Joueur</span>
                    <span id="current-player-name" class="player-name">-</span>
                </div>
                <div class="throw-info">
                    <span id="throw-number" class="throw-number">Lancer 1/3</span>
                    <span id="series-number" class="series-number">S√©rie 1/5</span>
                </div>
                <div class="current-score">
                    <span class="score-label">Score</span>
                    <span id="current-score" class="score-value">0</span>
                </div>
            </div>

            <!-- Historique des lancers du tour (fl√©chettes) -->
            <div id="round-throws" class="round-throws" style="display: none;">
                <div id="round-throws-list" class="round-throws-list"></div>
                <div id="round-throws-total" class="round-throws-total"></div>
            </div>

            <!-- Zone de jeu centrale -->
            <div class="game-main">
                <!-- Cible -->
                <div class="target-container">
                    <svg id="target-svg" viewBox="0 0 500 500" class="target">
                        <!-- G√©n√©r√© par JavaScript -->
                    </svg>
                    <div id="impact-marker" class="impact-marker"></div>
                    <div id="points-popup" class="points-popup"></div>
                </div>

                <!-- Tableau des scores -->
                <div class="scoreboard">
                    <h3>Scores</h3>
                    <div id="scoreboard-list" class="scoreboard-list">
                        <!-- G√©n√©r√© dynamiquement -->
                    </div>
                </div>
            </div>

            <!-- Contr√¥les du jeu -->
            <div class="game-controls">
                <button id="btn-undo" class="btn btn-control">
                    ‚Ü∂ Annuler
                </button>
                <button id="btn-miss" class="btn btn-control btn-miss">
                    ‚úó Rat√©
                </button>
                <button id="btn-killshot" class="btn btn-control btn-killshot" disabled>
                    ‚òÖ Killshot
                </button>
                <button id="btn-menu" class="btn btn-control">
                    ‚ò∞ Menu
                </button>
            </div>
        </div>

        <!-- Menu pause -->
        <div id="pause-menu" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Pause</h3>
                <button id="btn-resume" class="btn btn-primary">Reprendre</button>
                <button id="btn-fullscreen" class="btn btn-secondary">Plein √âcran</button>
                <button id="btn-quit-game" class="btn btn-danger">Quitter la Partie</button>
            </div>
        </div>

        <!-- Modal Description du Mode -->
        <div id="mode-description-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="mode-desc-title">Mode de Jeu</h3>
                <p id="mode-desc-text" class="mode-description-text"></p>
                <button id="btn-close-mode-desc" class="btn btn-primary">Compris !</button>
            </div>
        </div>

        <!-- Modal QR Code / Upload Image -->
        <div id="qr-upload-modal" class="modal" style="display: none;">
            <div class="modal-content qr-modal">
                <h3>Choisis ta Cible</h3>
                <div id="qr-display" class="qr-display">
                    <p>Scanne ce QR code avec ton t√©l√©phone pour changer l'image</p>
                    <div id="qr-code-container" class="qr-code-container"></div>
                    <p class="qr-hint">Ou importe directement depuis cet appareil :</p>
                </div>
                <div class="upload-controls">
                    <label class="btn btn-primary upload-btn">
                        <input type="file" id="image-upload" accept="image/*" style="display: none;">
                        Choisir une image
                    </label>
                    <div id="image-preview" class="image-preview" style="display: none;">
                        <img id="preview-img" src="" alt="Preview">
                        <span id="image-timer" class="image-timer"></span>
                    </div>
                </div>
                <div class="qr-modal-buttons">
                    <button id="btn-clear-image" class="btn btn-secondary" style="display: none;">Supprimer l'image</button>
                    <button id="btn-close-qr-modal" class="btn btn-primary">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- √âcran de fin de partie -->
    <div id="screen-end" class="screen">
        <div class="end-container">
            <h2 id="winner-title">üèÜ Victoire !</h2>
            <div id="winner-name" class="winner-name">-</div>

            <div class="final-rankings">
                <h3>Classement Final</h3>
                <div id="rankings-list" class="rankings-list">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>
            </div>

            <div class="game-stats">
                <h3>Statistiques</h3>
                <div id="stats-container" class="stats-grid">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>
            </div>

            <div class="end-buttons">
                <button id="btn-rematch" class="btn btn-primary">Revanche</button>
                <button id="btn-new-game-end" class="btn btn-secondary">Nouvelle Partie</button>
                <button id="btn-home" class="btn btn-secondary">Menu Principal</button>
            </div>
        </div>
    </div>

    <!-- √âcran des param√®tres -->
    <div id="screen-settings" class="screen">
        <div class="settings-container">
            <h2>Param√®tres</h2>

            <div class="setting-item">
                <label>
                    <input type="checkbox" id="setting-sounds" checked>
                    Sons activ√©s
                </label>
            </div>

            <div class="setting-item">
                <label>
                    <input type="checkbox" id="setting-vibration" checked>
                    Vibrations
                </label>
            </div>

            <div class="setting-item">
                <label>
                    <input type="checkbox" id="setting-animations" checked>
                    Animations
                </label>
            </div>

            <div class="setting-item">
                <label>Killshot autoris√© au</label>
                <select id="setting-killshot-throw">
                    <option value="3">Dernier lancer uniquement</option>
                    <option value="0">Tous les lancers</option>
                </select>
            </div>

            <div class="setting-item">
                <label>Serveur d'images (mode Ta Cible)</label>
                <input type="text" id="setting-image-server" class="setting-input" placeholder="http://localhost:3000">
                <small style="color: #888; display: block; margin-top: 5px;">URL du serveur pour recevoir les photos</small>
            </div>

            <div class="settings-buttons">
                <button id="btn-back-settings" class="btn btn-primary">Retour</button>
                <button id="btn-clear-data" class="btn btn-danger">Effacer les donn√©es</button>
            </div>
        </div>
    </div>

    <!-- √âcran du leaderboard -->
    <div id="screen-leaderboard" class="screen">
        <div class="leaderboard-container">
            <h2>Classement</h2>
            <div id="leaderboard-list" class="leaderboard-list">
                <!-- G√©n√©r√© dynamiquement -->
            </div>
            <div class="leaderboard-buttons">
                <button id="btn-back-leaderboard" class="btn btn-primary">Retour</button>
                <button id="btn-clear-leaderboard" class="btn btn-danger">Effacer</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
